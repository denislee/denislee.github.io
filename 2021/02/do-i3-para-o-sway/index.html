<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>do i3 para o Sway</title>
	
	<meta name="description" content="">
	<meta name="image" content="">
	
	<meta itemprop="name" content="do i3 para o Sway">
	<meta itemprop="description" content="">
	<meta itemprop="image" content="">
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:title" content="do i3 para o Sway">
	<meta name="twitter:description" content="">
	<meta name="twitter:site" content="@denislee">
	<meta name="twitter:creator" content="@denislee">
	<meta name="twitter:image:src" content="">
	
	
	<meta name="og:title" content="do i3 para o Sway">
	<meta name="og:description" content="">
	
	<meta name="og:url" content="https://denislee.github.io/2021/02/do-i3-para-o-sway/">
	<meta name="og:site_name" content="do i3 para o Sway">
	<meta name="og:type" content="article">
	
	<meta name="article:author" content="denislee">
	<meta name="article:tag" content="i3 sway ">
	<link rel="stylesheet" type="text/css" href="/css/style.css">
	<script src="/js/caption.js"></script>
</head>
<body>

<header >
	<a href="/" style="float: left;color:#777;"><strong>denis lee</strong>
	</a>
	<a href="/index.xml" style="color:#777;float: left;"><strong>
		&nbsp;
	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
</strong></a>


</header>


<div id="loadingMask" style="width: 100%; height: 100%; position: fixed; background: #fff;"></div>
<script>
function fadeOut(el) {
  el.style.opacity = 1;

  var last = +new Date();
  var tick = function() {
    el.style.opacity = +el.style.opacity - (new Date() - last) / 80;
    last = +new Date();
    

    if (el.style.opacity > 0) {
      (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16);
    } else {
    	el.style.display='none';
    }
  };

  tick();
}

function ready(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
         el = document.getElementById('loadingMask');
         fadeOut(el);
        var elements = document.querySelectorAll("img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("alt")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("alt"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });

    } else {
        document.addEventListener('DOMContentLoaded', fn);
    }
}
window.onload = ready;
</script>

<div class="content">
	<h1>do i3 para o Sway <aside><a href="/tags/i3/" class="w3-tag">/i3</a>&nbsp;&nbsp;&nbsp;<a href="/tags/sway/" class="w3-tag">/sway</a>&nbsp;&nbsp;&nbsp;</aside></h1>
	<h1 id="motivação">Motivação</h1>
<p>Uma das poucas coisas que me fariam mudar de ideia de trocar de sistema operacional, window manager ou qualquer software que eu uso no computador, com certeza, é velocidade/performance (por isso que, normalmente, não gosto de aplicações feitas em Electron, pois costumam ser bem devagar).</p>
<p>E, visto que o Sway é a transição mais tranquila para usuários i3, porém com um twist bem importante para a performance, pois utiliza o wayland no lugar do xorg.</p>
<h1 id="dificuldades">Dificuldades</h1>
<p>Mas, nem tudo são flores. Apesar de eu ser super baunilha (sempre usei o Manjaro com i3 do jeito que veio), existem alguns programas bem específicos que eu uso no meu dia a dia. Eles são:</p>
<ul>
<li>Synergy (sério, tenho múltiplos computadores ligados na mesa.)</li>
<li>Flameshot</li>
<li>xmodmap</li>
</ul>
<p>O resto, eu realmente não liguei muito e minha configuração antiga do i3 serviu muito bem no Sway. Mas, nesses programas eu tive um bom atrito (um deles eu ainda não encontrei substituto).</p>
<h1 id="flameshot">Flameshot</h1>
<p>O problema foi resolvido com a sugestão de um colega meu do trabalho, com o combo de aplicações: grim, slurp e swappy. Que, honestamente, funciona melhor que o Flameshot no aspecto de edição da imagem antes de exportar.</p>
<pre><code>    bindsym $mod+p exec grim -g &quot;$(slurp)&quot; - | swappy -f -
</code></pre><h1 id="xmodmap">xmodmap</h1>
<p>No meu computador de trabalho eu não tive dificuldades, pois eu utilizei um teclado mecânico completamente configurável. E, com isso, consegui deixar as teclas do jeito que eu queria:</p>
<ul>
<li>Troca do Capslock por Ctrl</li>
<li>Troca das teclas vizinhas do espaço pelos Supers (Mod4)</li>
</ul>
<p>Já no meu laptop pessoal, eu tenho um computador que comprei no Japão. E, por esse motivo, ele tem um teclado diferente. Possui teclas adicionais:</p>
<ul>
<li>Muhenkan (No conversion)</li>
<li>Henkan (Convert)</li>
<li>Kana Mode</li>
</ul>
<p>Eu aproveito essas teclas para transformar no Super (Mod4), que são teclas muito importante para gerenciamento de janelas em windows managers de tiling (colocação?). E, como eu usava um arquivo .Xmodmap para configurar essas teclas e o wayland não aceita mais essas teclas, eu tive que criar o seguinte arquivo <code>~/.xkb/symbols/jp-mod</code></p>
<pre><code>partial modifier_keys
xkb_symbols &quot;basic&quot; {
  include &quot;us(intl)&quot;
  key &lt;MUHE&gt; { [ Super_L ] };
  key &lt;HENK&gt; { [ Super_R ] };
  modifier_map Mod4 { &lt;MUHE&gt;, &lt;HENK&gt; };
};
</code></pre><p>E faço referência no arquivo de configuração do Sway <code>~/.config/sway/config</code></p>
<pre><code>input * {
  xkb_layout jp-mod
  xkb_options caps:ctrl_modifier
}
</code></pre><h1 id="synergy">Synergy</h1>
<p>Infelizmente não existe substituto que funcione como o Synergy ou próximo disso. E, fazer ele funcionar no wayland é um esforço bem grande.</p>
<p>Se você realizar uma busca na internet vai encontrar uma discussão sobre a compatibilidade do Synergy para o wayland de 2014. Sim, 2014:</p>
<ul>
<li><a href="https://github.com/symless/synergy-core/issues/4090">https://github.com/symless/synergy-core/issues/4090</a></li>
</ul>
<p>E, toda issue aberta sobre isso, é automaticamente fechada e o CEO da empresa garante que isso está no roadmap para a próxima grande release deles:</p>
<ul>
<li><a href="https://symless.com/synergy/roadmap">https://symless.com/synergy/roadmap</a></li>
</ul>
<p>Algo que está sendo prometido desde 2014 e deu em feijoada até agora. Duvido muito que vamos ver algo dessa portabilidade em um futuro próximo.</p>
<p>Pesquisando alternativas encontrei algo que faz um KVM bem meia boca de maneira virtual que não depende do xorg ou do wayland para funcionar:</p>
<ul>
<li><a href="https://github.com/htrefil/rkvm">https://github.com/htrefil/rkvm</a></li>
</ul>
<p>Porém, diversas pessoas reportaram que não funciona. E, de fato, não funcionou para mim também. A única coisa que acontece, é travar o seu computador assim que sobe o server. Alguém, aparentemente, conseguiu mapear o problema, mas sem sucesso de fazer funcionar.</p>
<h1 id="conclusão">Conclusão</h1>
<p>Estou gostando bastante do Sway, mesmo não conseguindo utilizar 100% todas as aplicações que eu tinha acesso antigamente. Mas, mesmo assim, ainda acho que vale a pena a troca da falta do Synergy para a performance que ele prove.</p>
<p>Para quem tiver curiosidade:</p>
<ul>
<li><a href="https://swaywm.org/">https://swaywm.org/</a></li>
</ul>

</div>









<footer>
	<p>"On the Internet, nobody knows you're a dog." - <em>Peter Steiner</em></p>
	<p>This site was made with <a href="https://github.com/gohugoio/hugo">Hugo</a> using theme <a href="https://github.com/schollz/onetwothree">onetwothree</a> made by <a href="https://github.com/schollz">schollz</a>.</p>
</footer>
</body>
</html>
