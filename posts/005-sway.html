<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="blog."/><title>sway | Next.js Blog Example with Markdown</title><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/582c13877261c2d54d6a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/582c13877261c2d54d6a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/947c49e68dbf503d2ee0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/947c49e68dbf503d2ee0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-fb76148cfcfb42ca18eb.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-8d15616dad332ac01c02.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4419dadb93e234a9a363.js" defer=""></script><script src="/_next/static/chunks/328-d0bce99a0c5502a3e057.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-dfbbbde60d66ce531b70.js" defer=""></script><script src="/_next/static/-ZP1aG6cJNA7s1ymvVPQ2/_buildManifest.js" defer=""></script><script src="/_next/static/-ZP1aG6cJNA7s1ymvVPQ2/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><div class="border-b bg-accent-1 border-accent-2"><div class="container mx-auto px-5"><div class="py-2 text-center text-sm"></div></div></div><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/">blog</a>.</h2><article class="mb-32"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">sway</h1><div class="hidden md:block md:mb-12"><div class="flex items-center"><div class="text-xl font-bold">denis lee</div></div></div><div class="mb-8 md:mb-16 sm:mx-0"></div><div class="max-w-2xl mx-auto"><div class="block md:hidden mb-6"><div class="flex items-center"><div class="text-xl font-bold">denis lee</div></div></div><div class="mb-6 text-lg"><time dateTime="2020-02-22T05:35:07.322Z">February	22, 2020</time></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__1x9gM"><h1>Motivação</h1>
<p>Uma das poucas coisas que me fariam mudar de ideia de trocar de sistema operacional, window manager ou qualquer software que eu uso no computador, com certeza, é velocidade/performance (por isso que, normalmente, não gosto de aplicações feitas em Electron, pois costumam ser bem devagar).</p>
<p>E, visto que o Sway é a transição mais tranquila para usuários i3, porém com um twist bem importante para a performance, pois utiliza o wayland no lugar do xorg.</p>
<h1>Dificuldades</h1>
<p>Mas, nem tudo são flores. Apesar de eu ser super baunilha (sempre usei o Manjaro com i3 do jeito que veio), existem alguns programas bem específicos que eu uso no meu dia a dia. Eles são:</p>
<ul>
<li>Synergy (sério, tenho múltiplos computadores ligados na mesa.)</li>
<li>Flameshot</li>
<li>xmodmap</li>
</ul>
<p>O resto, eu realmente não liguei muito e minha configuração antiga do i3 serviu muito bem no Sway. Mas, nesses programas eu tive um bom atrito (um deles eu ainda não encontrei substituto).</p>
<h1>Flameshot</h1>
<p>O problema foi resolvido com a sugestão de um colega meu do trabalho, com o combo de aplicações: grim, slurp e swappy. Que, honestamente, funciona melhor que o Flameshot no aspecto de edição da imagem antes de exportar.</p>
<pre><code>    bindsym $mod+p exec grim -g "$(slurp)" - | swappy -f -
</code></pre>
<h1>xmodmap</h1>
<p>No meu computador de trabalho eu não tive dificuldades, pois eu utilizei um teclado mecânico completamente configurável. E, com isso, consegui deixar as teclas do jeito que eu queria:</p>
<ul>
<li>Troca do Capslock por Ctrl</li>
<li>Troca das teclas vizinhas do espaço pelos Supers (Mod4)</li>
</ul>
<p>Já no meu laptop pessoal, eu tenho um computador que comprei no Japão. E, por esse motivo, ele tem um teclado diferente. Possui teclas adicionais:</p>
<ul>
<li>Muhenkan (No conversion)</li>
<li>Henkan (Convert)</li>
<li>Kana Mode</li>
</ul>
<p>Eu aproveito essas teclas para transformar no Super (Mod4), que são teclas muito importante para gerenciamento de janelas em windows managers de tiling (colocação?). E, como eu usava um arquivo .Xmodmap para configurar essas teclas e o wayland não aceita mais essas teclas, eu tive que criar o seguinte arquivo <code>~/.xkb/symbols/jp-mod</code></p>
<pre><code>partial modifier_keys
xkb_symbols "basic" {
  include "us(intl)"
  key &#x3C;MUHE> { [ Super_L ] };
  key &#x3C;HENK> { [ Super_R ] };
  modifier_map Mod4 { &#x3C;MUHE>, &#x3C;HENK> };
};
</code></pre>
<p>E faço referência no arquivo de configuração do Sway <code>~/.config/sway/config</code></p>
<pre><code>input * {
  xkb_layout jp-mod
  xkb_options caps:ctrl_modifier
}
</code></pre>
<h1>Synergy</h1>
<p>Infelizmente não existe substituto que funcione como o Synergy ou próximo disso. E, fazer ele funcionar no wayland é um esforço bem grande.</p>
<p>Se você realizar uma busca na internet vai encontrar uma discussão sobre a compatibilidade do Synergy para o wayland de 2014. Sim, 2014:</p>
<ul>
<li>https://github.com/symless/synergy-core/issues/4090</li>
</ul>
<p>E, toda issue aberta sobre isso, é automaticamente fechada e o CEO da empresa garante que isso está no roadmap para a próxima grande release deles:</p>
<ul>
<li>https://symless.com/synergy/roadmap</li>
</ul>
<p>Algo que está sendo prometido desde 2014 e deu em feijoada até agora. Duvido muito que vamos ver algo dessa portabilidade em um futuro próximo.</p>
<p>Pesquisando alternativas encontrei algo que faz um KVM bem meia boca de maneira virtual que não depende do xorg ou do wayland para funcionar:</p>
<ul>
<li>https://github.com/htrefil/rkvm</li>
</ul>
<p>Porém, diversas pessoas reportaram que não funciona. E, de fato, não funcionou para mim também. A única coisa que acontece, é travar o seu computador assim que sobe o server. Alguém, aparentemente, conseguiu mapear o problema, mas sem sucesso de fazer funcionar.</p>
<h1>Conclusão</h1>
<p>Estou gostando bastante do Sway, mesmo não conseguindo utilizar 100% todas as aplicações que eu tinha acesso antigamente. Mas, mesmo assim, ainda acho que vale a pena a troca da falta do Synergy para a performance que ele prove.</p>
<p>Para quem tiver curiosidade:</p>
<ul>
<li>https://swaywm.org/</li>
</ul>
</div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-5xl font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">denislee.github.io</h3></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"sway","date":"2020-02-22T05:35:07.322Z","slug":"005-sway","author":{"name":"denis lee"},"content":"\u003ch1\u003eMotivação\u003c/h1\u003e\n\u003cp\u003eUma das poucas coisas que me fariam mudar de ideia de trocar de sistema operacional, window manager ou qualquer software que eu uso no computador, com certeza, é velocidade/performance (por isso que, normalmente, não gosto de aplicações feitas em Electron, pois costumam ser bem devagar).\u003c/p\u003e\n\u003cp\u003eE, visto que o Sway é a transição mais tranquila para usuários i3, porém com um twist bem importante para a performance, pois utiliza o wayland no lugar do xorg.\u003c/p\u003e\n\u003ch1\u003eDificuldades\u003c/h1\u003e\n\u003cp\u003eMas, nem tudo são flores. Apesar de eu ser super baunilha (sempre usei o Manjaro com i3 do jeito que veio), existem alguns programas bem específicos que eu uso no meu dia a dia. Eles são:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSynergy (sério, tenho múltiplos computadores ligados na mesa.)\u003c/li\u003e\n\u003cli\u003eFlameshot\u003c/li\u003e\n\u003cli\u003exmodmap\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eO resto, eu realmente não liguei muito e minha configuração antiga do i3 serviu muito bem no Sway. Mas, nesses programas eu tive um bom atrito (um deles eu ainda não encontrei substituto).\u003c/p\u003e\n\u003ch1\u003eFlameshot\u003c/h1\u003e\n\u003cp\u003eO problema foi resolvido com a sugestão de um colega meu do trabalho, com o combo de aplicações: grim, slurp e swappy. Que, honestamente, funciona melhor que o Flameshot no aspecto de edição da imagem antes de exportar.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    bindsym $mod+p exec grim -g \"$(slurp)\" - | swappy -f -\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003exmodmap\u003c/h1\u003e\n\u003cp\u003eNo meu computador de trabalho eu não tive dificuldades, pois eu utilizei um teclado mecânico completamente configurável. E, com isso, consegui deixar as teclas do jeito que eu queria:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTroca do Capslock por Ctrl\u003c/li\u003e\n\u003cli\u003eTroca das teclas vizinhas do espaço pelos Supers (Mod4)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJá no meu laptop pessoal, eu tenho um computador que comprei no Japão. E, por esse motivo, ele tem um teclado diferente. Possui teclas adicionais:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMuhenkan (No conversion)\u003c/li\u003e\n\u003cli\u003eHenkan (Convert)\u003c/li\u003e\n\u003cli\u003eKana Mode\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEu aproveito essas teclas para transformar no Super (Mod4), que são teclas muito importante para gerenciamento de janelas em windows managers de tiling (colocação?). E, como eu usava um arquivo .Xmodmap para configurar essas teclas e o wayland não aceita mais essas teclas, eu tive que criar o seguinte arquivo \u003ccode\u003e~/.xkb/symbols/jp-mod\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003epartial modifier_keys\nxkb_symbols \"basic\" {\n  include \"us(intl)\"\n  key \u0026#x3C;MUHE\u003e { [ Super_L ] };\n  key \u0026#x3C;HENK\u003e { [ Super_R ] };\n  modifier_map Mod4 { \u0026#x3C;MUHE\u003e, \u0026#x3C;HENK\u003e };\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eE faço referência no arquivo de configuração do Sway \u003ccode\u003e~/.config/sway/config\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003einput * {\n  xkb_layout jp-mod\n  xkb_options caps:ctrl_modifier\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eSynergy\u003c/h1\u003e\n\u003cp\u003eInfelizmente não existe substituto que funcione como o Synergy ou próximo disso. E, fazer ele funcionar no wayland é um esforço bem grande.\u003c/p\u003e\n\u003cp\u003eSe você realizar uma busca na internet vai encontrar uma discussão sobre a compatibilidade do Synergy para o wayland de 2014. Sim, 2014:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ehttps://github.com/symless/synergy-core/issues/4090\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eE, toda issue aberta sobre isso, é automaticamente fechada e o CEO da empresa garante que isso está no roadmap para a próxima grande release deles:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ehttps://symless.com/synergy/roadmap\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAlgo que está sendo prometido desde 2014 e deu em feijoada até agora. Duvido muito que vamos ver algo dessa portabilidade em um futuro próximo.\u003c/p\u003e\n\u003cp\u003ePesquisando alternativas encontrei algo que faz um KVM bem meia boca de maneira virtual que não depende do xorg ou do wayland para funcionar:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ehttps://github.com/htrefil/rkvm\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePorém, diversas pessoas reportaram que não funciona. E, de fato, não funcionou para mim também. A única coisa que acontece, é travar o seu computador assim que sobe o server. Alguém, aparentemente, conseguiu mapear o problema, mas sem sucesso de fazer funcionar.\u003c/p\u003e\n\u003ch1\u003eConclusão\u003c/h1\u003e\n\u003cp\u003eEstou gostando bastante do Sway, mesmo não conseguindo utilizar 100% todas as aplicações que eu tinha acesso antigamente. Mas, mesmo assim, ainda acho que vale a pena a troca da falta do Synergy para a performance que ele prove.\u003c/p\u003e\n\u003cp\u003ePara quem tiver curiosidade:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ehttps://swaywm.org/\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"005-sway"},"buildId":"-ZP1aG6cJNA7s1ymvVPQ2","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>